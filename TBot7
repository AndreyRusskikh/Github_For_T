



import telebot
from telebot import types # для указание типов
import config
import requests
import random

url = 'https://api.thecatapi.com/v1/images/search?mime_type=jpg'

bot = telebot.TeleBot('5570068886:AAFYxm-BItCqTKmY9rYjlYS9npP46pK_sWA')

def get_url():
    contents = requests.get('https://random.dog/woof.json').json()
    url2 = contents['url']
    return url2



@bot.message_handler(commands=['start'])
def start(message):
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    btn1 = types.KeyboardButton("Кот")
    btn2 = types.KeyboardButton("Собак")
    btn3 = types.KeyboardButton("Рандомайзер")
    markup.add(btn1, btn2, btn3)

    bot.send_message(message.chat.id, text="Привет, {0.first_name}! Я бот для поднятия настроения".format(message.from_user), reply_markup=markup)


@bot.message_handler(content_types=['text'])
def func(message):
    if(message.text == "Кот"):

        response = requests.get(url)
        data = response.json()
        cat = data[0]['url']

        bot.send_photo(message.chat.id, cat)

    elif(message.text == "Собак"):
        #response2 = requests.get(url2)
        #data2 = response2.json()
        #dog = data2[0]['url']
        #bot.send_photo(message.chat.id, dog)

        url3 = get_url()
        bot.send_photo(message.chat.id,photo=url3)



    elif(message.text == "Рандомайзер"):

        bot.send_message(message.chat.id, 'Введите аргументы:')
        bot.register_next_step_handler(message, car_name)

def car_name(message):

        command = message.text.split(" ")
        command_len = len(command)
        try:
            if command_len == 1:
                bot.reply_to(message, random.randint(1,100))
            elif command_len == 2:
                bot.reply_to(message, random.randint(1, int(command[1])))
            elif command_len == 3:
                bot.reply_to(message, random.randint(int(command[1]), int(command[2])))
            else:
                bot.reply_to(message, "Максимальна кількість параметрів - 2.")
        except Exception:
            bot.reply_to(message, "Щось пішло не так, спробуйте знову.")

bot.polling(none_stop=True)